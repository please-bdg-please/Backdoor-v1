#!/bin/bash
set -e

# Create new UUIDs for package references
CRYPTOSWIFT_REF="5F2CACAD-738F-4D42-B7CE-301D691A0F36"
SNAPKIT_REF="D3CF6C59-90A7-4F51-BD47-36AADC5B403D"
LOTTIE_REF="6CC3FB0B-C905-4FB4-9135-9852CE2F74E0"
SWIFTUIX_REF="A38A9A11-FA7F-44DE-BB13-24CEA5F9B50A"
MOYA_REF="BE18CE02-6F5D-4C8B-8EE2-4FC714BC55B5"
RSWIFT_REF="D1FDBB54-A3D5-4EFC-98A3-1F6A33C35C15"
ZIPFOUNDATION_REF="F6EDA77F-CFB6-4E9A-9158-A8E0A8E2106C"
SSNATURALLANGUAGE_REF="8B9D8720-27D4-4D42-AD91-C6A7F5C4D8FF"

# Create new UUIDs for package products
CRYPTOSWIFT_PROD="F3D6F4E3-1D78-4A71-8C94-151CFE7733DE"
SNAPKIT_PROD="7CC0A9E9-F3B1-4C8D-9E3D-3210F6C8C6FA"
LOTTIE_PROD="D87D83C7-3E9F-455D-A1F6-D27F17E7EBEC"
SWIFTUIX_PROD="8C3E6A2A-F0D1-4A85-BD59-CC58A0DDE482"
MOYA_PROD="B97E3BF4-07C2-4E5D-B3BB-2C4D8DC5AF1B"
RSWIFT_PROD="F1D0FF8C-52C0-4879-8D29-80A61C2C7F25"
ZIPFOUNDATION_PROD="E7F6E7D7-0A8C-4D5C-8D49-7D8A6B9B28D0"
SSNATURALLANGUAGE_PROD="41B58FFC-7D30-4FC7-ACA5-23C31E7CDA46"

# Create a new project file with fixed references
sed -E \
    -e "s/334AD1B02D8B987600E12346/$CRYPTOSWIFT_REF/g" \
    -e "s/334AD1B12D8B987600E12347/$SNAPKIT_REF/g" \
    -e "s/334AD1B22D8B987600E12348/$LOTTIE_REF/g" \
    -e "s/334AD1B32D8B987600E12349/$SWIFTUIX_REF/g" \
    -e "s/334AD1B42D8B987600E1234A/$MOYA_REF/g" \
    -e "s/334AD1B52D8B987600E1234B/$RSWIFT_REF/g" \
    -e "s/336EEE7F2C32367C0011188D/$ZIPFOUNDATION_REF/g" \
    -e "s/334AD19F2D8B987600E12345/$SSNATURALLANGUAGE_REF/g" \
    -e "s/334AD1C02D8B987600E12356/$CRYPTOSWIFT_PROD/g" \
    -e "s/334AD1C12D8B987600E12357/$SNAPKIT_PROD/g" \
    -e "s/334AD1C22D8B987600E12358/$LOTTIE_PROD/g" \
    -e "s/334AD1C32D8B987600E12359/$SWIFTUIX_PROD/g" \
    -e "s/334AD1C42D8B987600E1235A/$MOYA_PROD/g" \
    -e "s/334AD1C52D8B987600E1235B/$RSWIFT_PROD/g" \
    -e "s/336EEE802C32367C0011188D/$ZIPFOUNDATION_PROD/g" \
    -e "s/334AD1A02D8B987600E12345/$SSNATURALLANGUAGE_PROD/g" \
    -e "s/334AD1D02D8B987600E12366/$CRYPTOSWIFT_PROD/g" \
    -e "s/334AD1D12D8B987600E12367/$SNAPKIT_PROD/g" \
    -e "s/334AD1D22D8B987600E12368/$LOTTIE_PROD/g" \
    -e "s/334AD1D32D8B987600E12369/$SWIFTUIX_PROD/g" \
    -e "s/334AD1D42D8B987600E1236A/$MOYA_PROD/g" \
    -e "s/334AD1D52D8B987600E1236B/$RSWIFT_PROD/g" \
    -e "s/334AD1A12D8B987600E12345/$SSNATURALLANGUAGE_PROD/g" \
    backdoor.xcodeproj/project.pbxproj > backdoor.xcodeproj/project.pbxproj.fixed

# Apply the fix
mv backdoor.xcodeproj/project.pbxproj.fixed backdoor.xcodeproj/project.pbxproj

echo "Fixed package references with standard UUIDs"
